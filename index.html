<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>è¿·ã£ãŸã‚‰ã“ã‚Œï½œ2æŠã‚’ãƒ©ãƒ³ãƒ€ãƒ ã§æ±ºã‚ã‚‹æ±ºæ–­ãƒ„ãƒ¼ãƒ«</title>
<style>
body {
  margin: 0;
  font-family: 'Arial', sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  height: 100vh;
  background: linear-gradient(135deg, #1f2c3a, #3a4a5a);
  color: #fff;
  transition: background 0.5s;
}

.container {
  background: rgba(0,0,0,0.75);
  padding: 30px;
  border-radius: 15px;
  text-align: center;
  max-width: 400px;
  width: 90%;
  box-shadow: 0 10px 20px rgba(0,0,0,0.3);
}

h1 { margin-bottom: 20px; }

input, select, textarea, button {
  width: 100%;
  padding: 8px;
  margin: 5px 0;
  border-radius: 8px;
  border: none;
  font-size: 16px;
}

textarea {
  resize: none;
  height: 50px;
}

button {
  margin-top: 15px;
  padding: 10px 20px;
  font-size: 16px;
  border-radius: 12px;
  border: none;
  background: #4CAF50;
  color: white;
  cursor: pointer;
  transition: 0.2s;
}

button:hover { background: #45a049; }

#result {
  margin-top: 20px;
  font-size: 22px;
  font-weight: bold;
  min-height: 50px;
  transition: transform 0.3s, color 0.3s;
}

#reason { margin-top: 10px; font-size: 16px; font-style: italic; color: #ddd; }

.history { margin-top: 20px; font-size: 14px; color: #ccc; text-align: left; }
</style>
</head>
<body>

<div class="container">
<h1>ã©ã£ã¡ã«ã™ã‚‹ï¼Ÿ 2æŠãƒ„ãƒ¼ãƒ«</h1>

<input type="text" id="optionA" placeholder="é¸æŠè‚¢A">
<input type="text" id="optionB" placeholder="é¸æŠè‚¢B">

<select id="mood">
  <option value="neutral">ä»Šæ—¥ã®æ°—åˆ†: æ™®é€š</option>
  <option value="happy">å…ƒæ°— ğŸ˜Š</option>
  <option value="tired">ç–²ã‚Œæ°—å‘³ ğŸ˜´</option>
  <option value="indecisive">è¿·ã„æ°—å‘³ ğŸ¤”</option>
  <option value="excited">ã‚„ã‚‹æ°—æº€ã€… ğŸ˜</option>
</select>

<textarea id="comment" placeholder="ä»Šæ—¥ã®æ°—æŒã¡ã‚’è‡ªç”±ã«æ›¸ã“ã†"></textarea>

<button onclick="decide()">æ±ºå®šï¼</button>

<p id="result"></p>
<p id="reason"></p>

<div class="history" id="history"></div>
</div>

<script>
const reasons = [
  "ä»Šæ—¥ã¯ç›´æ„Ÿã«å¾“ãŠã†ï¼",
  "é‹å‹¢çš„ã«ã¯ã“ã¡ã‚‰ãŒè‰¯ã„ã‹ã‚‚â€¦",
  "æ°—åˆ†ã§æ±ºã‚ã‚‹ã¨å‰",
  "æŒ‘æˆ¦ã™ã‚‹ãªã‚‰ã“ã¡ã‚‰ï¼",
  "æ§ãˆã‚ã«é¸ã¶ãªã‚‰ã“ã£ã¡",
  "ãªã‚“ã¨ãªãã“ã£ã¡ãŒè‰¯ã•ãã†"
];

function decide() {
  const a = document.getElementById("optionA").value || "A";
  const b = document.getElementById("optionB").value || "B";
  const mood = document.getElementById("mood").value;
  const comment = document.getElementById("comment").value || "";

  // æ°—åˆ†ã«ã‚ˆã‚‹ç¢ºç‡è£œæ­£
  let probA = 0.5;
  if(mood === "happy") probA = 0.5;       
  else if(mood === "tired") probA = 0.6;  
  else if(mood === "indecisive") probA = 0.7; 
  else if(mood === "excited") probA = 0.5;   

  const choice = Math.random() < probA ? a : b;
  const color = choice === a ? "#3498db" : "#e74c3c";

  const resultElem = document.getElementById("result");
  resultElem.textContent = choice;
  resultElem.style.color = color;
  resultElem.style.transform = "scale(1.2)";
  setTimeout(() => { resultElem.style.transform = "scale(1)"; }, 300);

  const reason = reasons[Math.floor(Math.random() * reasons.length)];
  document.getElementById("reason").textContent = reason;

  saveHistory({a, b, mood, comment, choice, reason, time: new Date().toLocaleString()});
  showHistory();

  // èƒŒæ™¯å¤‰åŒ–
  document.body.style.background = choice === a 
    ? "linear-gradient(135deg, #1f2c3a, #2c3e50)" 
    : "linear-gradient(135deg, #3a1f2c, #5a3a4a)";
}

function saveHistory(entry) {
  let histories = JSON.parse(localStorage.getItem("decisionHistory") || "[]");
  histories.unshift(entry);
  if(histories.length > 5) histories.pop();
  localStorage.setItem("decisionHistory", JSON.stringify(histories));
}

function showHistory() {
  const histories = JSON.parse(localStorage.getItem("decisionHistory") || "[]");
  const container = document.getElementById("history");
  container.innerHTML = "<strong>æœ€è¿‘ã®é¸æŠï¼š</strong><br>" +
    histories.map(h => `${h.time}: ${h.choice} (${h.mood}) â€” ${h.reason} â€” ã‚³ãƒ¡ãƒ³ãƒˆ: ${h.comment}`).join("<br>");
}

window.onload = showHistory;
</script>

</body>
</html>

